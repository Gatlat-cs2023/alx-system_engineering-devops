#!/bin/bash

# Define base strings
base_water="water"
base_stir="stir"
base_bestchol="bestchol"

# Function: convert from custom base to decimal
to_decimal() {
    local number=$1
    local base=$2
    local base_len=${#base}

    # Translate custom base digits to 0..(base_len-1)
    local digits=$(echo "$number" | tr "$base" "$(seq -s '' 0 $((base_len - 1)) | tr -d ' ')")

    # Use bc to convert base N number (digits) to decimal
    echo "obase=10; ibase=$base_len; $digits" | bc
}

# Function: convert from decimal to custom base
from_decimal() {
    local decimal=$1
    local base=$2
    local base_len=${#base}
    local result=""

    while [ "$decimal" -gt 0 ]; do
        local remainder=$((decimal % base_len))
        decimal=$((decimal / base_len))
        # Prepend corresponding digit from base string
        result="${base:$remainder:1}$result"
    done

    # If number is zero
    if [ -z "$result" ]; then
        result="${base:0:1}"
    fi

    echo "$result"
}

# Convert WATER and STIR to decimal
dec_water=$(to_decimal "$WATER" "$base_water")
dec_stir=$(to_decimal "$STIR" "$base_stir")

# Sum in decimal
sum=$((dec_water + dec_stir))

# Convert sum to base_bestchol
from_decimal "$sum" "$base_bestchol"
